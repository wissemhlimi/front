{"version":3,"file":"static/js/3249.b530c547.chunk.js","mappings":"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","sources":["modules/Search/SearchService.tsx","view/Archive/SearchArchive.tsx","view/Search/SRPCard.tsx","view/shared/Breadcrumb.tsx"],"sourcesContent":["import authAxios from \"src/modules/shared/axios/authAxios\";\nimport AuthCurrentTenant from \"src/modules/auth/authCurrentTenant\";\n\nexport default class SearchService {\n  // GET CATEGORIES LIST FOR PUBLICATIONS\n  static async getCategoriesList() {\n    const tenantId = AuthCurrentTenant.get();\n    const response = await authAxios.get(\n      `/tenant/${tenantId}/category-publication`\n    );\n    return response.data;\n  }\n\n  static async getSearchResultsForPublicationsBasedOnSearchString(\n    SEARCH_STRING,\n    OFFSET\n  ) {\n    const tenantId = AuthCurrentTenant.get();\n    const response = await authAxios.get(\n      `/tenant/${tenantId}/search?filter=${SEARCH_STRING}&limit=10&offset=${OFFSET}&validated={true}`\n    );\n    return response.data;\n  }\n\n  // SAERCH BASED ON CATEGORIES (REVERSE LOGIC)\n  static async searchUsingMainCatefories(SEARCH_STRING, categoryName, OFFSET) {\n    const tenantId = AuthCurrentTenant.get();\n    const response = await authAxios.get(\n      `/tenant/${tenantId}/category-publication?filter[titleFR]=${categoryName}`\n    );\n    const publicationsOfSelectedCategory = response.data.rows[0]?.publications;\n    const finalResponseOBject = {\n      rows: publicationsOfSelectedCategory ?? [],\n      count: publicationsOfSelectedCategory?.length ?? 0,\n    };\n    return finalResponseOBject;\n  }\n\n  // ARCHIVE SEARCH\n  static async getSearchResultsForArchiveBasedOnSearchString(\n    SEARCH_STRING,\n    FILTER_STRING,\n    OFFSET\n  ) {\n    const tenantId = AuthCurrentTenant.get();\n    const response = await authAxios.get(\n      `/tenant/${tenantId}/publication?filter[descriptionFR]=${SEARCH_STRING}&limit=5&offset=${OFFSET}&filter[statut]=archive${FILTER_STRING}`\n    );\n    return response.data;\n  }\n\n  static async getArchivePublications(SEARCH_STRING, FILTER, OFFSET) {\n    const tenantId = AuthCurrentTenant.get();\n    const response = await authAxios.get(\n      `/tenant/${tenantId}/publication/search?filter=${SEARCH_STRING}&limit=10&offset=${OFFSET}&advanced[statut]=${FILTER.statut}&advanced[thematique]=${FILTER.thematique}&advanced[category]=${FILTER.category}`\n    );\n    return response.data;\n  }\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { Etudes, search__archeive } from \"src/assets/images\";\nimport { i18n } from \"../../i18n\";\nimport Breadcrumb from \"../shared/Breadcrumb\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport SearchService from \"src/modules/Search/SearchService\";\nimport Skeleton from \"react-loading-skeleton\";\nimport \"react-loading-skeleton/dist/skeleton.css\";\nimport SRPCard from \"../Search/SRPCard\";\nimport { BsBox } from \"react-icons/bs\";\n\nfunction SearchArchive({ location }) {\n  const langue = localStorage.getItem(\"language\");\n\n  const [publications, setPublications] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const getValidThumbnail = (attachmentsArray) => {\n    const acceptableExtions = \"png, jpg, jpeg, gif\";\n    let fakeUrl = \"https://via.placeholder.com/270x175\";\n    attachmentsArray.forEach((att) => {\n      if (att.downloadUrl)\n        if (att.downloadUrl.length >= 1) {\n          const urlExtension = att.downloadUrl.substring(\n            att.downloadUrl.lastIndexOf(\".\") + 1,\n            att.downloadUrl.length\n          );\n          if (acceptableExtions.includes(urlExtension)) {\n            fakeUrl = att.downloadUrl;\n          }\n        }\n    });\n    return fakeUrl;\n  };\n  const getArchivePublications = async () => {\n    try {\n      setLoading(true);\n      let result = await SearchService.getArchivePublications(\n        location.archiveSearchString,\n        location.archiveFilter,\n        0\n      );\n      setPublications(result.rows);\n      setLoading(false);\n    } catch (error) {\n      console.log(\"err\", error);\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    getArchivePublications();\n  }, []);\n\n  return (\n    <>\n      <Breadcrumb\n        title={i18n(\"common.Archives\")}\n        items={[[i18n(\"app.title\"), \"/\"], [i18n(\"common.Archives\")]]}\n      />\n      <div className=\"app__archieve__page_search\">\n        {loading ? (\n          <section>\n            <Skeleton height={170} />\n          </section>\n        ) : (\n          <div className=\"archeive\">\n            <div className=\"archieve__content\">\n              <div className=\"archieve__left\">\n                <SearchArchiveLayout>\n                  <div>\n                    {publications.length > 0 ? (\n                      <div>\n                        {publications.map((searchResult, index) => {\n                          let thumbnail: any;\n\n                          if (searchResult[\"photos\"]) {\n                            thumbnail = getValidThumbnail(\n                              searchResult[\"photos\"]\n                            );\n                          }\n                          if (langue === \"fr\") {\n                            return (\n                              <SRPCard\n                                type={\n                                  searchResult[\"category\"]\n                                    ? searchResult[\"category\"][\"titleFR\"]\n                                    : null\n                                }\n                                title={searchResult[\"titleFR\"]}\n                                entite={\"detail\"}\n                                key={index}\n                                _id={searchResult[\"_id\"] ?? 0}\n                                date={searchResult[\"date\"]}\n                                content={searchResult[\"descriptionFR\"]}\n                                thumbnail={thumbnail}\n                              />\n                            );\n                          } else if (langue === \"ar\") {\n                            return (\n                              <SRPCard\n                                type={\n                                  searchResult[\"category\"]\n                                    ? searchResult[\"category\"][\"titleAR\"]\n                                    : null\n                                }\n                                title={searchResult[\"titleAR\"]}\n                                entite={\"detail\"}\n                                key={index}\n                                _id={searchResult[\"_id\"] ?? 0}\n                                date={searchResult[\"date\"]}\n                                content={searchResult[\"descriptionAR\"]}\n                                thumbnail={thumbnail}\n                              />\n                            );\n                          } else if (langue === \"en\") {\n                            return (\n                              <SRPCard\n                                type={\n                                  searchResult[\"category\"]\n                                    ? searchResult[\"category\"][\"titleEN\"]\n                                    : null\n                                }\n                                title={searchResult[\"titleEN\"]}\n                                entite={\"detail\"}\n                                key={index}\n                                _id={searchResult[\"_id\"] ?? 0}\n                                date={searchResult[\"date\"]}\n                                content={searchResult[\"descriptionEN\"]}\n                                thumbnail={thumbnail}\n                              />\n                            );\n                          }\n                        })}\n                      </div>\n                    ) : (\n                      <h3 className=\"h3\" id=\"noDataFound\">\n                        <BsBox />\n                        &nbsp;{i18n(\"common.noData\")}\n                      </h3>\n                    )}\n                  </div>\n                </SearchArchiveLayout>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\nexport default SearchArchive;\n\nconst SearchArchiveLayout = styled.div`\n  width: 100%;\n  margin: 1rem 0;\n\n  #noDataFound {\n    font-family: \"Proxima Nova\";\n    font-style: normal;\n    font-weight: 100;\n    font-size: 1.5rem;\n    text-align: center;\n    color: #c7c6c6;\n\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n  }\n`;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport parse from \"html-react-parser\";\nimport moment from \"moment\";\nimport { calendar, noData } from \"src/assets/images\";\nexport default function SRPCard({\n  _id,\n  date,\n  content,\n  thumbnail,\n  title,\n  entite,\n  type,\n}) {\n  const formattedDate = moment(date).format(\"l\");\n  return (\n    <CardLayout>\n      <Link to={\"/\" + entite + \"/\" + _id}>\n        <div className=\"search__description\">\n          <div>\n            <div className=\"evenement__left\">\n              {thumbnail ? (\n                <img\n                  className=\"lazyload\"\n                  style={{ width: 100, height: 100 }}\n                  src={thumbnail}\n                  alt=\"\"\n                />\n              ) : (\n                <img\n                  className=\"lazyload\"\n                  style={{ width: 100, height: 100 }}\n                  src={noData}\n                  alt=\"\"\n                />\n              )}\n            </div>\n            <div className=\"evenement__right\">\n              <div className=\"date\">\n                <div>\n                  <img className=\"lazyload\" src={calendar} alt=\"\" srcSet=\"\" />\n                  {formattedDate}\n                </div>\n                {type ? (\n                  <div className=\"cardHeader\">\n                    <span className=\"categoryBadge\">{type}</span>\n                  </div>\n                ) : null}\n              </div>\n              {title ? (\n                <div className=\"title\">\n                  {title.length > 100\n                    ? parse(title.substring(0, 100) + \"...\")\n                    : parse(title)}\n                </div>\n              ) : null}\n              {content ? (\n                <div className=\"right__footer\">\n                  {content.length > 100\n                    ? parse(content.substring(0, 100) + \"...\")\n                    : parse(content)}\n                </div>\n              ) : null}\n            </div>\n          </div>\n        </div>\n      </Link>\n      <hr></hr>\n    </CardLayout>\n  );\n}\n\nconst CardLayout = styled.div`\n  /* LEFT SECTION */\n  hr {\n    height: 1px;\n    background-color: #2b2840;\n    border: none;\n  }\n  .cardContent {\n    flex-grow: 1;\n    height: 100%;\n    padding-left: 1rem;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n\n    .cardHeader {\n      width: 100%;\n      display: flex;\n      justify-content: space-between;\n      font-size: 12px;\n      font-family: \"Proxima Nova\";\n\n      .categoryBadge {\n        background: #f8d7da;\n        border-radius: 3px;\n        color: var(--dark--red);\n        padding: 0.4rem 0.5rem;\n        font-size: 12px;\n        font-family: \"Proxima Nova\";\n      }\n    }\n\n    .title {\n      margin-top: 1.5rem;\n      color: var(--violet);\n\n      span {\n        font-family: \"Bebas Neue Pro\";\n        font-style: normal;\n        font-weight: 700;\n        font-size: 23px;\n        line-height: 24px;\n      }\n    }\n  }\n  hr {\n    margin-top: 10px;\n    margin-bottom: 5px;\n  }\n`;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nconst BreadcrumbNav = styled.div`\n  margin: 28px 0 10px 0;\n  .breadcrumb {\n    width: 100%;\n    margin: 0;\n    padding: 0;\n    background-color: transparent;\n  }\n  ol {\n    display: flex;\n  }\n  li {\n    font-family: \"Proxima Nova\";\n    font-style: normal;\n    font-weight: 400;\n    font-size: 14px;\n    line-height: 25px;\n  }\n  .breadcrump__nav {\n    margin: auto;\n    left: 0;\n    display: flex;\n    max-width: 1170px;\n    flex-direction: column;\n  }\n\n  .breadcrumb-item:not(.active) a {\n    color: rgba(0, 0, 0, 0.45);\n  }\n\n  h2 {\n    font-family: \"Bebas Neue Pro\";\n    font-style: normal;\n    font-weight: 700;\n    font-size: 47px;\n    line-height: 39px;\n  }\n`;\n\nfunction Breadcrumb(props) {\n  const isLink = (item) => {\n    return item.length > 1;\n  };\n  return (\n    <BreadcrumbNav>\n      <div className=\"breadcrump__nav\">\n        <div>\n          <h2 className=\"h2\">{props.title}</h2>\n        </div>\n        <div>\n          <ol className=\"breadcrumb\">\n            {props.items.map((item, index) => (\n              <li key={item[0]} className={`breadcrumb-item liClass`}>\n                {isLink(item) ? (\n                  <Link to={item[1]}>\n                    {\" \"}\n                    {item[0]}\n                    {item[1] === \"/\" ? (\n                      <>{item[1]}</>\n                    ) : (\n                      <div style={{ display: \"none\", marginBottom: 0 }}>\n                        {item[1]}\n                      </div>\n                    )}\n                  </Link>\n                ) : (\n                  item[0]\n                )}\n              </li>\n            ))}\n          </ol>\n        </div>\n      </div>\n    </BreadcrumbNav>\n  );\n}\n\nexport default Breadcrumb;\n"],"names":["SearchService","tenantId","AuthCurrentTenant","authAxios","response","data","SEARCH_STRING","OFFSET","categoryName","publicationsOfSelectedCategory","rows","publications","finalResponseOBject","count","length","FILTER_STRING","FILTER","statut","thematique","category","location","langue","localStorage","getItem","useState","setPublications","loading","setLoading","getArchivePublications","archiveSearchString","archiveFilter","result","console","log","useEffect","title","i18n","items","className","height","SearchArchiveLayout","map","searchResult","index","thumbnail","attachmentsArray","fakeUrl","forEach","att","downloadUrl","urlExtension","substring","lastIndexOf","includes","getValidThumbnail","type","entite","_id","date","content","id","styled","SRPCard","formattedDate","moment","format","CardLayout","to","style","width","src","alt","noData","calendar","srcSet","parse","BreadcrumbNav","props","isLink","item","display","marginBottom"],"sourceRoot":""}